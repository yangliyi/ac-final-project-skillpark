<%
  # TODO: move to controller, and pass comments variable when render this partial
  comments = @profile.publiccomments.includes(:user => :profile)
%>
<div class="row">
  <div class="col-sm-12">
    <div class="panel">
      <div class="panel-body">
        <% if comments.any? %>
            <% comments.each do |pub|%>
            <div id="publiccomment-<%= pub.id %>">
              <div class="publiccomment-commenter">
                <span class="label">
                  <%= link_to profile_path(pub.user.profile) do %>
                    <%= image_tag (pub.user.profile.photo.url), style: "width: 20px; display: inline; border-radius: 100%;" %>
                    <%= pub.user.profile.username %>
                  <% end %>：
                </span>
                <span><%= pub.content %></span>
                <span style="float: right;"><%= t( time_ago_in_words(pub.created_at) ) %>前</span>
              </div>
            </div>
            <% end %>
        <% else %>
          <h4>尚無留言</h4>
        <% end %>
        <%= form_for Publiccomment.new, url: profile_publiccomments_path(@profile), remote: true do |f| %>
          <div class="form-group">
            <%= f.text_area :content, class: "form-control" %>
          </div>
          <%= f.submit "回覆", class: "btn btn-default"%>
        <% end %>
      </div>
    </div>
  </div>
</div>
